<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tender - Open Lobbies</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="myicon.ico" />
</head>

<body>
    <header>
        <h1 id="TopHeader">Tender<br> Welcome, <span id="usernamePlaceholder"></span>!</h1>
        <nav id="navBar">
            <ul>
                <li> <a href="index.html" onclick="logout()"> Logout</a></li>
                <!-- Will replace text here with Welcome, *username* when user is logged in. -->
                <li><a href="lobbies.html">Lobbies</a></li>
                <li><a href="lobby.html">Host a Game</a></li>
                <li><a href="about.html">About</a></li>
            </ul>
        </nav>
        <hr />
    </header>
    <main>

        <div id="serverlist">The server list will go here, populated by the below script. the HTML for an example will
            be below.</div>
        <!-- Example server entry -->
        <ul class="server-list">
            <!-- removed previous placeholder for lobbies that open and close randomly. This is normally the database. But you aren't able to see your own server in the server browser. So, I opted to do this instead. This will be the database, however.-->
        </ul>
        <!--<script src = "fetchServerListScript.js"></script> Commenting this out until I actually write the content of this javascript. Will probably use an ul, but
	    i'm not sure, so I'll not use either in this mode. -->
    </main>
    <footer>
        <hr />
        <span id="myName">Connor Blackburn</span>
        <br />
        <a id="githubLink" href="https://github.com/Smartiepants109/startup">GitHub</a>
    </footer>
    <script src="loginHandler.js">    </script>
    <script>
        function addServerItem() {
            var serverList = document.getElementById('serverlist');

            var serverItem = document.createElement('li');
            serverItem.classList.add('server-item');

            var serverDetails = document.createElement('div');
            serverDetails.classList.add('server-details');

            var serverName = document.createElement('div');
            serverName.classList.add('server-name');
            serverName.innerHTML = '<strong>Lobby: Lobby ' + (Math.floor(Math.random() * 999)) + '</strong>';

            var serverInfo = document.createElement('div');
            serverInfo.classList.add('server-info');
            serverInfo.innerHTML = 'Host: <span class="host">John Doe</span><br>' +
                'Users Present: <span class="presentUsers">5</span><br>' +
                'General Location: <span class="location">Utah</span><br>';

            serverDetails.appendChild(serverName);
            serverDetails.appendChild(serverInfo);

            serverItem.appendChild(serverDetails);

            var joinButton = document.createElement('button');
            joinButton.classList.add('join-button');
            joinButton.textContent = 'Join';

            serverItem.appendChild(joinButton);

            serverList.appendChild(serverItem);
        }


        function removeServerItem() {
            var serverList = document.getElementById('serverlist');
            if (serverList.children.length > 0) {
                var randomIndex = Math.floor(Math.random() * serverList.children.length);
                serverList.removeChild(serverList.children[randomIndex]);
            }
        }
        function updateServerList() {
            var serverList = document.getElementById('serverlist');
            var shouldAdd = Math.random() < 0.7; // 50% chance to add, 50% chance to remove
            if (shouldAdd) {
                addServerItem();
            } else {
                if (serverList.children.length == 0) {
                    addServerItem();
                } else {
                    removeServerItem();
                }
            }
        }

        // 5 seconds. 1/1000. remember.
        setInterval(updateServerList, 5000);
    </script>
    <script>
        window.addEventListener('load', function() {
            // Your function to be executed once the page loads
            // For example:
            updateHeader();
        });
    </script>
    
</body>

</html>